{% extends "dashboard/base.html" %}
{% load static %}
{% block main-content %}
<style>
.checkbox-container {
    border: 1px solid #ced4da;
    border-radius: .25rem;
    max-height: 120px;
    overflow-y: auto;
    padding: 5px;
    width: 100%;
}
.checkbox-item {
    padding: 3px 0;
    margin: 0;
}
.checkbox-item input[type="checkbox"] {
    margin: 0 5px 0 0;
    vertical-align: middle;
}
.checkbox-item label {
    margin: 0;
    display: inline;
    font-size: 12px;
}

/* Dollar input styling */
.dollar-input-wrapper {
    position: relative;
}
.dollar-input {
    padding-left: 1.5rem;
}
.dollar-input-wrapper::before {
    content: "$";
    position: absolute;
    top: 50%;
    left: 10px;
    transform: translateY(-50%);
    color: #495057;
    font-size: 14px;
    pointer-events: none;
}

/* Section separation and spacing */
.agent-info-container, 
.custom-fields-panel {
  border-bottom: 1px solid #dee2e6; /* light gray line */
  padding-bottom: 20px;
  margin-bottom: 30px;
}

/* Remove border from last section */
.agent-info-container:last-of-type,
.custom-fields-panel:last-of-type {
  border-bottom: none;
  margin-bottom: 0;
  padding-bottom: 0;
}

/* Custom Fields header with flex alignment */
.section-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
}

/* Button styling override if needed */
.custom-fields-edit .btn {
  white-space: nowrap;
}
.section-title {
  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
  font-weight: 700; /* Bold */
  font-size: 1.75rem;
  color: #222222; /* Darker, almost black */
  letter-spacing: 0.05em;
  margin-bottom: 20px;
  border-bottom: 2px solid #e0e0e0; /* a subtle blue underline for emphasis */
  padding-bottom: 8px;
  text-transform: capitalize;
  
}
</style>

<div class="container-default">
    <div class="content-wrapper">
        <div class="search-agents-container">
            <!-- Page Header -->
            <div class="page-header-row">
                <h1 class="page-title">Alyson Gross</h1>
            </div>

            <!-- Tab Navigation -->
            <ul class="nav nav-tabs" id="mainTabs">
                <li class="active"><a href="#detail-policy" data-toggle="tab">Detail</a></li>
                <li><a href="#Coverage-policy" data-toggle="tab">Coverage</a></li>

                <li class="dropdown" id="commissions-dropdown">
                    <a class="dropdown-toggle" data-toggle="dropdown" href="#">Commissions <span class="caret"></span></a>
                    <ul class="dropdown-menu" id="commissions-menu">
                        <li><a href="#payment-policy" data-toggle="tab">Payment History</a></li>
                        <li><a href="#projected-commission" data-toggle="tab">Projected Commission</a></li>
                        <li><a href="#payees" data-toggle="tab">Payees</a></li>
                        <li><a href="#settings" data-toggle="tab">Settings</a></li>
                    </ul>
                </li>
                
                <li><a href="#Activities-policy" data-toggle="tab">Activities</a></li>
                <li><a href="#Notes-policy" data-toggle="tab">Notes</a></li>
                <li class="dropdown">
                    <a class="dropdown-toggle" data-toggle="dropdown" href="#">
                        WorkFlow <span class="caret"></span>
                    </a>
                    <ul class="dropdown-menu">
                        <li><a href="#Commissions-policy" data-toggle="tab">Commissions Summary</a></li>
                        <li><a href="#CommissionDetails-policy" data-toggle="tab">Commission Details</a></li>
                        <li><a href="#CommissionStatements-policy" data-toggle="tab">Statements</a></li>
                    </ul>
                </li>
                <li class="dropdown">
                    <a class="dropdown-toggle" data-toggle="dropdown" href="#">
                        Email <span class="caret"></span>
                    </a>
                    <ul class="dropdown-menu">
                        <li><a href="#Commissions-policy" data-toggle="tab">Commissions Summary</a></li>
                        <li><a href="#CommissionDetails-policy" data-toggle="tab">Commission Details</a></li>
                        <li><a href="#CommissionStatements-policy" data-toggle="tab">Statements</a></li>
                    </ul>
                </li>
            </ul>

            <!-- Tab Content Sections -->
            <div class="tab-content">
                <!-- Detail Tab -->
                <div class="tab-pane active" id="detail-policy">
                    {% include "policy/details_tab.html" %}
                </div>
                
                <!-- Coverage Tab -->
                <div class="tab-pane" id="Coverage-policy">
                    {% include "policy/coverage.html" %}
                </div>
                
                <!-- Commissions Tabs -->
                <div class="tab-pane" id="payment-policy">
                    {% include "policy/payment.html" %}
                </div>
                <div class="tab-pane" id="projected-commission">
                    {% include "policy/projected.html" %}
                </div>
                <div class="tab-pane" id="payees">
                    {% include "policy/Payees.html" %}
                </div>
                <div class="tab-pane" id="settings">
                    {% include "policy/Settings.html" %}
                </div>
             
                <!-- Other Tabs -->
                <div class="tab-pane" id="Activities-policy">
                    {% include "policy/activities.html" %}
                </div>
                <div class="tab-pane" id="Notes-content">
                    {% include "policy/notes.html" %}
                </div>
                <div class="tab-pane" id="Workflow-policy">
                    {% include "policy/workflow.html" %}
                </div>
                <div class="tab-pane" id="Emails-policy">
                    {% include "policy/emails.html" %}
                </div>
            </div>
        </div>
    </div>
</div>

<script src="{% static 'js/bootstrap/bootstrap.min.js' %}"></script>
    
<script>

  $(document).ready(function () {
    // Bootstrap tab show
    $('#mainTabs a[data-toggle="tab"]').click(function (e) {
      e.preventDefault();
      $(this).tab('show');
    });

    // Show tab if URL has hash
    if (location.hash) {
      $('a[href="' + location.hash + '"]').tab('show');
    }

    // Update hash on tab change
    $('#mainTabs a[data-toggle="tab"]').on('shown.bs.tab', function (e) {
      window.location.hash = e.target.hash;
    });

    // Bootstrap dropdown init
    $('.dropdown-toggle').dropdown();

    // Prevent dropdown from closing on inner clicks
    $('.dropdown-menu').click(function (e) {
      e.stopPropagation();
    });

    // Define commission tab hashes
    const commissionTabs = ['#payment-policy', '#projected-commission', '#payees', '#settings'];

    // Show/hide dropdown menu on page load
    const currentTab = window.location.hash;
    if (commissionTabs.includes(currentTab)) {
      $('#commissions-menu').hide();
    } else {
      $('#commissions-menu').show();
    }

    // Tab switch event
    $('a[data-toggle="tab"]').on('shown.bs.tab', function (e) {
      const newTab = $(e.target).attr("href");
      if (commissionTabs.includes(newTab)) {
        $('#commissions-menu').hide();
      } else {
        $('#commissions-menu').show();
      }

      // Hide the open dropdown menu after clicking
      $('.dropdown.open .dropdown-toggle').dropdown('toggle'); // closes the open dropdown
    });
  });


</script>

{% endblock %}