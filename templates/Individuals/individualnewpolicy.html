<div class="modal fade" id="newPolicyModal2" tabindex="-1" role="dialog" aria-labelledby="newPolicyModalLabel">
    <div class="modal-dialog modal-md" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
                <h4 class="modal-title" id="newPolicyModalLabel">New Policy</h4>
            </div>

            <div class="modal-body">
                <form id="policyForm">
                    <div class="step-container">
                        <!-- Step 1: Client Info -->
                       
<div class="panel panel-default">
    <div class="panel-heading">
        <div class="step-indicator clickable-tab active-tab" id="clientInfoTab" style="cursor: pointer;">
            <span class="step-number">1</span>
            <span class="step-title text-success font-weight-bold">Client Info</span>
        </div>
    </div>
    <div class="panel-body client-info-section active-section">
        <div class="form-group">
            <label for="recordType">Select Record Type</label>
            <select id="recordType" class="form-control" disabled>
                <option selected>Existing Individual</option>
            </select>
        </div>
        <div class="form-group">
            <label for="individualName">Individual Name <span class="text-danger">*</span></label>
            <input type="text" class="form-control" id="individualName"
                   value="{{ individual.first_name|title }} {{ individual.last_name|title }}" readonly>
        </div>
    </div>
</div>

                        <!-- Step 2: Policy Info -->
                        <div class="panel panel-default">
                            <div class="panel-heading">
                                <div class="step-indicator clickable-tab" id="policyInfoTab" style="cursor: pointer;">
                                    <span class="step-number">2</span>
                                    <span class="step-title">Policy Info</span>
                                </div>
                            </div>
                            <div class="panel-body policy-info-section" style="display: none;">
                                <p>Fields marked with an <span class="text-danger">*</span> are required.</p>
                                <div class="row">
                                    <div class="form-group col-md-4">
                                        <label>Carrier</label>
                                        <select class="form-control">
                                            <option>AARP</option>
                                            <option>Aetna</option>
                                            <option>Anthem</option>
                                            <option>Cigna</option>
                                            <option>Highmark</option>
                                            <option>Humana</option>
                                            <option>Med Mutual PDP</option>
                                            <option>Medico</option>
                                            <option>Peak</option>
                                            <option>United Healthcare</option>
                                            <option>UPMC</option>
                                            <option>Wellcare</option>
                                        </select>
                                    </div>
                                    <div class="form-group col-md-4">
                                        <label for="policyNumber">Policy Number</label>
                                        <input type="text" class="form-control" id="policyNumber" placeholder="Policy Number">
                                    </div>
                                    <div class="form-group col-md-4">
                                        <label for="status">Status <span class="text-danger">*</span></label>
                                        <input type="text" class="form-control" id="status" placeholder="Status">
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="form-group col-md-4">
                                        <label>Coverage Type</label>
                                        <select class="form-control">
                                            <option value="">Select Coverage</option>
                                            <option value="M">Monthly</option>
                                            <option value="W">Weekly</option>
                                            <option value="A">Annually</option>
                                            <option value="O">One-Time</option>
                                        </select>
                                    </div>
                                    <div class="form-group col-md-4">
                                        <label for="effectiveDate">Effective Date</label>
                                        <input type="date" class="form-control" id="effectiveDate" placeholder="mm/dd/yyyy">
                                    </div>
                                    <div class="form-group col-md-4">
                                        <label for="agentAgency">Agent/Agency</label>
                                        <input type="text" class="form-control" id="agentAgency" placeholder="Type to search">
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </form>
            </div>

            <div class="modal-footer modal-footer-responsive justify-content-center text-center">
                <div class="btn-group-custom">
                    <button type="submit" class="btn btn-success curved-btn" form="policyForm">Save</button>
                    <button type="submit" class="btn btn-success curved-btn" form="policyForm">Save & Add Coverage</button>
                    <button type="submit" class="btn btn-success curved-btn" form="policyForm">Save & Add Another</button>
                    <button type="button" class="btn btn-default curved-btn" data-dismiss="modal">Cancel</button>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    $(function () {
        $('#newPolicyModal2').on('show.bs.modal', function () {
            $('#policyForm')[0].reset();
            $('.client-info-section').show().addClass('active-section');
            $('.policy-info-section').hide().removeClass('active-section');
            $('#clientInfoTab').addClass('active-tab');
            $('#policyInfoTab').removeClass('active-tab');
        });

        $('#clientInfoTab').on('click', function () {
            $('.client-info-section').show().addClass('active-section');
            $('.policy-info-section').hide().removeClass('active-section');
            $('#clientInfoTab').addClass('active-tab');
            $('#policyInfoTab').removeClass('active-tab');
        });

        $('#policyInfoTab').on('click', function () {
            $('.policy-info-section').show().addClass('active-section');
            $('.client-info-section').hide().removeClass('active-section');
            $('#policyInfoTab').addClass('active-tab');
            $('#clientInfoTab').removeClass('active-tab');
        });

        // Optional: Form submission handlers
        $('button[form="policyForm"]').on('click', function (e) {
            e.preventDefault();
            var btnText = $(this).text().trim();

            if (btnText === 'Save') {
                $('#policyForm').submit();
            } else if (btnText === 'Save & Add Coverage') {
                $('#policyInfoTab').click();
            } else if (btnText === 'Save & Add Another') {
                $('#policyForm').submit();
                $('#newPolicyModal2').modal('hide');
                setTimeout(() => $('#newPolicyModal2').modal('show'), 500);
            }
        });
    });
</script>
